#!/usr/bin/env bash
# Install zsh plugins (syntax-highlighting, autosuggestions, history-substring-search)

set -e

PLUGIN_DIR="$HOME/.zsh"

echo "==================================="
echo "Zsh Plugins Configuration Helper"
echo "==================================="
echo ""

mkdir -p "$PLUGIN_DIR"

# Function to install or update a plugin
install_plugin() {
  local name="$1"
  local repo="$2"
  local target="$PLUGIN_DIR/$name"

  if [[ -d "$target" ]]; then
    echo "✓ $name already installed"
    read -p "  Update to latest version? [y/N] " response
    if [[ "$response" =~ ^[Yy]$ ]]; then
      echo "  Updating $name..."
      cd "$target" && git pull
      echo "  ✓ Updated!"
    fi
  else
    echo "Installing $name..."
    git clone --depth=1 "$repo" "$target"
    echo "✓ $name installed!"
  fi
  echo ""
}

# Install plugins
install_plugin "zsh-syntax-highlighting" "https://github.com/zsh-users/zsh-syntax-highlighting.git"
install_plugin "zsh-autosuggestions" "https://github.com/zsh-users/zsh-autosuggestions.git"
install_plugin "zsh-history-substring-search" "https://github.com/zsh-users/zsh-history-substring-search.git"

echo "==================================="
echo "All plugins processed!"
echo ""
echo "Next steps:"
echo "  - Restart your shell or run: source ~/.zshrc"
echo "  - Plugins will load automatically from ~/.zsh/"
