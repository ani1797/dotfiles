# Yazi File Manager Configuration
# Theme: Tokyo Night Cyberpunk
# Docs: https://yazi-rs.github.io/docs/configuration/yazi

# ============================================================================
# Manager
# ============================================================================
[mgr]
ratio        = [1, 4, 3]
sort_by      = "natural"
sort_sensitive = false
sort_reverse = false
sort_dir_first = true
linemode     = "size"
show_hidden  = false
show_symlink = true
scrolloff    = 5
title_format = "Yazi: {cwd}"

# ============================================================================
# Preview
# ============================================================================
[preview]
wrap       = "no"
tab_size   = 2
max_width  = 600
max_height = 900
image_filter  = "lanczos3"
image_quality = 75

# ============================================================================
# Opener
# ============================================================================
[opener]
edit = [
	{ run = "${EDITOR:-vim} \"$@\"", block = true, desc = "Edit", for = "unix" },
]
open = [
	{ run = "xdg-open \"$@\"", desc = "Open", for = "linux" },
	{ run = "open \"$@\"", desc = "Open", for = "macos" },
]
extract = [
	{ run = "ya pub extract --list \"$@\"", desc = "Extract here" },
]

# ============================================================================
# Open rules
# ============================================================================
[open]
prepend_rules = [
	{ mime = "text/*", use = ["edit", "open"] },
	{ mime = "inode/x-empty", use = ["edit", "open"] },

	{ mime = "application/json", use = ["edit", "open"] },
	{ mime = "*/javascript", use = ["edit", "open"] },
	{ mime = "*/x-{shellscript,python,lua,perl,ruby}", use = ["edit", "open"] },

	{ mime = "image/*", use = ["open", "edit"] },
	{ mime = "{audio,video}/*", use = ["open"] },
	{ mime = "application/{zip,gzip,x-tar,x-bzip2,x-7z-compressed,x-rar,x-xz,zstd}", use = ["extract", "open"] },

	{ mime = "application/pdf", use = ["open"] },
]

# ============================================================================
# Plugin previewers (extend defaults)
# ============================================================================
[plugin]
prepend_previewers = []
prepend_preloaders = []
