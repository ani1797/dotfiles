# ags/deps.yaml
packages:
  arch:
    - nodejs
    - npm
    - meson
    - ninja
    - gjs
    - gtk4-layer-shell
    - imagemagick
    - libnotify
    - networkmanager
    - wireplumber
    - bluez
    - power-profiles-daemon
    - polkit-gnome
  debian:
    - nodejs
    - npm
    - meson
    - ninja-build
    - gjs
    - libgtk-layer-shell-dev
    - imagemagick
    - libnotify-bin
    - network-manager
    - wireplumber
    - bluez
    - power-profiles-daemon
  fedora:
    - nodejs
    - npm
    - meson
    - ninja-build
    - gjs
    - gtk4-layer-shell
    - ImageMagick
    - libnotify
    - NetworkManager
    - wireplumber
    - bluez
    - power-profiles-daemon
  macos: []

script:
  - run: |
      if ! command -v ags &>/dev/null; then
        git clone --depth=1 https://github.com/Aylur/ags.git /tmp/ags-build
        cd /tmp/ags-build
        meson setup build
        meson install -C build
        rm -rf /tmp/ags-build
      fi
    provides: ags
  - run: |
      cd "$HOME/.local/share/dotfiles/ags"
      npm install
