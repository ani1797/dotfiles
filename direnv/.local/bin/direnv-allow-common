#!/usr/bin/env bash
# direnv-allow-common - Create a template .envrc in the current directory
# Works from any shell (bash/zsh/fish) due to shebang

set -euo pipefail

# shellcheck source=direnv-lib
source "$(dirname "$0")/direnv-lib"

check_direnv
handle_existing_envrc

TEMPLATE='# Auto-load .env files in this directory and subdirectories
# This .envrc is for auto-approved directories in direnv.toml

# Automatically load .env if it exists
layout auto

# Uncomment if you need language-specific layouts:
# layout uv           # Python with UV
# layout python       # Python with venv
# layout nodejs       # Node.js project
# layout golang       # Go project
# layout rust         # Rust project'

write_envrc "$TEMPLATE"

success ".envrc created in $(pwd)"
echo
info "Edit the .envrc to enable the layouts you need"
info "Run 'direnv allow' after editing to reload"
