#!/usr/bin/env bash
# Install FZF (fuzzy finder)

set -e

FZF_DIR="$HOME/.fzf"

echo "==================================="
echo "FZF Configuration Helper"
echo "==================================="
echo ""

# Check if already installed
if [[ -d "$FZF_DIR" ]]; then
  echo "✓ FZF already installed at $FZF_DIR"
  echo ""
  read -p "Update to latest version? [y/N] " response
  if [[ "$response" =~ ^[Yy]$ ]]; then
    echo "Updating FZF..."
    cd "$FZF_DIR" && git pull
    echo ""
    echo "Reinstalling FZF bindings..."
    "$FZF_DIR/install" --key-bindings --completion --no-update-rc
    echo ""
    echo "✓ Updated successfully!"
  fi
  exit 0
fi

# Install FZF
echo "Installing FZF to $FZF_DIR..."
echo ""

git clone --depth=1 https://github.com/junegunn/fzf.git "$FZF_DIR"

echo ""
echo "Installing FZF binaries and shell integration..."
"$FZF_DIR/install" --key-bindings --completion --no-update-rc

echo ""
echo "✓ FZF installed successfully!"
echo ""
echo "Next steps:"
echo "  - Restart your shell or run: source ~/.zshrc"
echo "  - Try 'Ctrl+R' for history search"
echo "  - Try 'Ctrl+T' for file search"
echo "  - Try 'Alt+C' for directory navigation"
